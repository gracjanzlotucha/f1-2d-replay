<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>F1 2D Replay — British Grand Prix 2025</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- ═══ LOADING SCREEN ══════════════════════════════════════════════════════ -->
<div id="loading-screen">
  <div class="loading-inner">
    <div class="f1-logo">
      <svg width="72" height="63" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M17.3067 3.63262C16.9522 5.5664 15.0771 7.11272 13.118 7.08724L12.904 8.25529C14.8629 8.28128 16.1636 9.86942 15.8095 11.8031L16.9918 11.8186C17.3464 9.88484 19.2223 8.33836 21.1815 8.36403L21.3956 7.19599C19.4363 7.17018 18.1348 5.58206 18.4891 3.64815L19.1308 0.145953L29.0355 0.27607C30.9949 0.301823 32.2962 1.89083 31.9418 3.82488L30.4446 11.9954L30.4006 12.1819C30.1376 13.1005 29.2186 13.8082 28.2617 13.7957L26.858 13.7772L26.6441 14.9443L28.1223 14.9637C29.0407 14.976 29.6696 15.675 29.5985 16.5591L29.5755 16.7381L28.1451 24.5441C27.7907 26.4781 25.9146 28.0254 23.9552 27.9997L14.0505 27.8696L14.6923 24.3674C15.0469 22.4335 16.9227 20.887 18.882 20.9128L19.096 19.7447C17.1368 19.719 15.8354 18.1307 16.1895 16.1969L15.0072 16.1813C14.6526 18.1152 12.7768 19.6617 10.8175 19.636L10.6035 20.804C12.5627 20.8297 13.8642 22.4179 13.5099 24.3518L12.8682 27.854L2.9645 27.7239C1.0051 27.6982 -0.296229 26.1092 0.0581828 24.1751L1.46186 16.5152L1.50345 16.3364C1.75595 15.4545 2.63819 14.7753 3.55678 14.7874L5.03499 14.8068L5.24885 13.6397L3.77065 13.6203C2.79101 13.6074 2.1404 12.8128 2.31749 11.8459L3.85494 3.4559C4.20935 1.52185 6.0854 -0.025424 8.04479 0.000316565L17.9485 0.130421L17.3067 3.63262Z" fill="#BFFF4A"/>
      </svg>
    </div>
    <div class="loading-title">British Grand Prix 2025</div>
    <div class="loading-subtitle">Silverstone Circuit</div>
    <div class="loading-bar-wrap">
      <div id="loading-bar"></div>
    </div>
    <div id="loading-msg" class="loading-msg">Initialising…</div>
  </div>
</div>

<!-- ═══ MAIN APP ════════════════════════════════════════════════════════════ -->
<div id="app" class="hidden">

  <!-- HEADER -->
  <header class="header">
    <div class="header-left">
      <div class="f1-badge">
        <svg width="32" height="28" viewBox="0 0 32 28" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M17.3067 3.63262C16.9522 5.5664 15.0771 7.11272 13.118 7.08724L12.904 8.25529C14.8629 8.28128 16.1636 9.86942 15.8095 11.8031L16.9918 11.8186C17.3464 9.88484 19.2223 8.33836 21.1815 8.36403L21.3956 7.19599C19.4363 7.17018 18.1348 5.58206 18.4891 3.64815L19.1308 0.145953L29.0355 0.27607C30.9949 0.301823 32.2962 1.89083 31.9418 3.82488L30.4446 11.9954L30.4006 12.1819C30.1376 13.1005 29.2186 13.8082 28.2617 13.7957L26.858 13.7772L26.6441 14.9443L28.1223 14.9637C29.0407 14.976 29.6696 15.675 29.5985 16.5591L29.5755 16.7381L28.1451 24.5441C27.7907 26.4781 25.9146 28.0254 23.9552 27.9997L14.0505 27.8696L14.6923 24.3674C15.0469 22.4335 16.9227 20.887 18.882 20.9128L19.096 19.7447C17.1368 19.719 15.8354 18.1307 16.1895 16.1969L15.0072 16.1813C14.6526 18.1152 12.7768 19.6617 10.8175 19.636L10.6035 20.804C12.5627 20.8297 13.8642 22.4179 13.5099 24.3518L12.8682 27.854L2.9645 27.7239C1.0051 27.6982 -0.296229 26.1092 0.0581828 24.1751L1.46186 16.5152L1.50345 16.3364C1.75595 15.4545 2.63819 14.7753 3.55678 14.7874L5.03499 14.8068L5.24885 13.6397L3.77065 13.6203C2.79101 13.6074 2.1404 12.8128 2.31749 11.8459L3.85494 3.4559C4.20935 1.52185 6.0854 -0.025424 8.04479 0.000316565L17.9485 0.130421L17.3067 3.63262Z" fill="#BFFF4A"/>
        </svg>
      </div>
      <div class="race-info">
        <span class="race-name">British Grand Prix</span>
        <span class="race-circuit">Silverstone Circuit · 2025</span>
      </div>
    </div>
    <div class="header-center">
      <div class="lap-counter">
        <span class="lap-label">LAP</span>
        <span id="hdr-lap-cur" class="lap-num">—</span>
        <span class="lap-sep">/</span>
        <span id="hdr-lap-total" class="lap-total">—</span>
      </div>
      <div id="hdr-status-badge" class="status-badge status-green">RACE</div>
    </div>
    <div class="header-right">
      <div class="weather-box" id="weather-box">
        <span class="weather-item" id="weather-air">— °C</span>
        <span class="weather-dot">·</span>
        <span class="weather-item" id="weather-track">— °C Track</span>
      </div>
      <div class="race-time-box">
        <span class="race-time-label">RACE TIME</span>
        <span id="hdr-race-time" class="race-time-val">0:00:00</span>
      </div>
    </div>
  </header>

  <!-- MAIN GRID -->
  <main class="main-grid">

    <!-- LEFT: STANDINGS -->
    <aside class="standings-panel">
      <div class="panel-header">
        <span class="panel-title">STANDINGS</span>
        <span class="panel-subtitle" id="standings-lap-label">LAP —</span>
      </div>
      <div class="standings-list" id="standings-list">
        <!-- populated by JS -->
      </div>
    </aside>

    <!-- MOBILE PANEL TABS (hidden on desktop via CSS) -->
    <div class="mobile-tab-bar">
      <button class="mobile-tab active" data-panel="standings">STANDINGS</button>
      <button class="mobile-tab" data-panel="insights">INSIGHTS</button>
    </div>

    <!-- CENTER: TRACK CANVAS -->
    <section class="track-section">
      <div class="track-container" id="track-container">
        <canvas id="track-canvas"></canvas>
        <!-- Speed tooltip -->
        <div id="car-tooltip" class="car-tooltip hidden">
          <div class="tooltip-driver"></div>
          <div class="tooltip-team"></div>
          <div class="tooltip-pos"></div>
        </div>
      </div>
    </section>

    <!-- RIGHT: INSIGHTS / EVENTS -->
    <aside class="insights-panel">
      <div class="panel-tab-bar">
        <button class="panel-tab active" id="tab-insights" data-tab="insights">INSIGHTS</button>
        <button class="panel-tab" id="tab-events" data-tab="events">EVENTS</button>
      </div>

      <!-- Curated race insights -->
      <div class="insights-content" id="race-insights-content"></div>

      <!-- Lap-by-lap events (previously "insights") -->
      <div class="insights-content hidden" id="events-content">
        <div class="insights-empty">Events will appear as the race progresses</div>
      </div>
    </aside>

    <!-- BOTTOM: TIMELINE / CONTROLS -->
    <footer class="controls-bar">

      <!-- Playback buttons -->
      <div class="ctrl-group ctrl-buttons">
        <button class="ctrl-btn" id="btn-prev-lap" title="Previous lap">⏮</button>
        <button class="ctrl-btn ctrl-btn-primary" id="btn-play" title="Play / Pause">▶</button>
        <button class="ctrl-btn" id="btn-next-lap" title="Next lap">⏭</button>
      </div>

      <!-- Timeline -->
      <div class="ctrl-group ctrl-timeline">
        <span id="ctrl-time-cur" class="ctrl-time">0:00</span>
        <div class="timeline-wrap">
          <input type="range" id="timeline" min="0" max="1000" value="0" class="timeline-slider" />
          <div class="timeline-lap-markers" id="timeline-lap-markers"></div>
        </div>
        <span id="ctrl-time-total" class="ctrl-time">0:00</span>
      </div>

      <!-- Speed + options -->
      <div class="ctrl-group ctrl-options">
        <div class="speed-selector">
          <span class="speed-label">SPEED</span>
          <div class="speed-btns">
            <button class="speed-btn" data-speed="0.5">0.5×</button>
            <button class="speed-btn speed-active" data-speed="1">1×</button>
            <button class="speed-btn" data-speed="2">2×</button>
            <button class="speed-btn" data-speed="4">4×</button>
            <button class="speed-btn" data-speed="8">8×</button>
            <button class="speed-btn" data-speed="16">16×</button>
          </div>
        </div>
        <label class="toggle-label">
          <input type="checkbox" id="toggle-trails" checked />
          <span class="toggle-track"></span>
          <span>Trails</span>
        </label>
        <label class="toggle-label">
          <input type="checkbox" id="toggle-labels" checked />
          <span class="toggle-track"></span>
          <span>Labels</span>
        </label>
      </div>

    </footer>

  </main>

</div>

<script src="app.js"></script>
</body>
</html>
